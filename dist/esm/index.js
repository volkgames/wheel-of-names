import{jsxs as e,jsx as t}from"react/jsx-runtime";import{useRef as r,useEffect as n}from"react";var a=function(e,t,r,n,a,i){e.save(),e.beginPath(),e.translate(t-n,r-a),e.scale(n,a),e.arc(1,1,1,0,2*Math.PI,!1),e.fillStyle=i,e.fill(),e.closePath(),e.restore()},i=function(e,t,r,n,a,i,o,c,u){e.save(),e.beginPath(),e.moveTo(t,r),e.arc(t,r,n,l(a),l(i),o),e.lineTo(t,r),e.fillStyle=c,e.fill(),e.restore()},o=function(e,t){return t.clearRect(0,0,e.width,e.height)},l=function(e){return e*Math.PI/180},c=function(e,t){return e+t*Math.random()},u=function(e,t){return function(e,t){return Math.round(c(e+1,t-1))-1}(360*e,360*t)};!function(e,t){void 0===t&&(t={});var r=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".canvas-container {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}");var f=["#3369e8","#d50f25","#eeb211","#009925","#000000"],s=function(c){var s,d=c.size,v=void 0===d?300:d,h=c.list,g=c.minSpins,m=void 0===g?1:g,y=c.maxSpins,p=void 0===y?5:y,C=c.fps,x=void 0===C?14:C,S=c.onComplete,w=c.colors,b=void 0===w?f:w,k=c.fontColor,P=void 0===k?"#fff":k,T=c.fontFamily,I=void 0===T?"Arial":T,M=c.backgroundColor,N=void 0===M?"#fff":M,R=c.pointerColor,B=void 0===R?"#fff":R,W=c.highlightColor,j=void 0===W?"rgba(255,100,100,0.5)":W,z=c.fontSize,A=void 0===z?20:z,E=c.tickSound,D=c.winSound,F=c.tickPlaybackRate,L=void 0===F?4:F,O=c.winPlaybackRate,q=void 0===O?1:O,G=c.onClick,H=void 0===G||G,J=r(null),K=r(null),Q=r(null),U=r(null),V=r(null),X=v/2,Y=X-X/10,Z=360/h.length,$=-1,_=-1,ee=-1,te=-1,re=function(){if(K.current){var e=K.current,t=e.getContext("2d");if(t){o(e,t);a(t,X,X,Y/10,Y/10,B),t.save(),t.translate(X,X),t.rotate(l(180));var r,n,i,c,u,f,s,d,v,h=X/20;n=0,i=h,c=h,u=0,f=6*h,s=-h,d=h,v=B,(r=t).save(),r.rotate(l(n)),r.beginPath(),r.moveTo(i,c),r.lineTo(u,f),r.lineTo(s,d),r.fillStyle=v,r.closePath(),r.fill(),r.strokeStyle="#000",r.restore(),t.restore()}}},ne=function(){if(U.current){var e=U.current,t=e.getContext("2d");if(t){o(e,t);var r=v/2;t.save(),t.translate(r,r),t.rotate(l(_)),t.translate(-r,-r),J.current&&(t.drawImage(J.current,0,0),t.restore(),Q.current&&(t.drawImage(Q.current,0,0),K.current&&t.drawImage(K.current,0,0)))}}},ae=function(){if($<0)return $=u(m,p),_=0,ee=10,te=.15,void(s=setInterval((function(){return ae()}),1e3/x));_>$-360&&(ee-=te)<1&&(ee=1);var e=_%360+Z/2,t=Math.round(e%Z);t<Z&&t>Z-5&&V.current&&E&&(V.current.src=E,V.current.playbackRate=L,V.current.play()),(_+=ee)>$?(clearInterval(s),ne(),function(e){var t=(e=-e)%360,r=t/Z,n=Math.round(r),a=n;n<0&&(n-=n+n),n>=h.length&&(n-=h.length);var o=270-(t-(Z/2+a*Z)),l=o-Z,c=j;if(Q.current){var u=Q.current.getContext("2d");u&&(u.lineWidth=Y/20,u.setLineDash([u.lineWidth]),i(u,X,X,Y-Y/50,o,l,!0,c),re(),ne(),V.current&&D&&(V.current.src=D,V.current.playbackRate=q,V.current.play()),S&&S(h[n]))}}(_),$=-1):ne()};n((function(){!function(){if(J.current){var e=J.current,t=J.current.getContext("2d");if(t){var r;o(e,t),a(t,X,X,Y,Y,N),t.font="".concat(null!=A?A:Z*(Y/X),"pt ").concat(I),t.textBaseline="middle";for(var n=0,c=0;n<h.length;n++)t.save(),t.translate(X,X),t.rotate(l(90-Z*n)),t.translate(-X,-X),c==b.length&&(c=0),r=b[c],c++,i(t,X,X,Y-Y/50,180-Z/2,180+Z/2,!1,r),t.save(),t.fillStyle=P,t.fillText(h[n],2*(X-Y),X,6*(X-Y)),t.restore(),t.restore()}}}(),re(),ne()}),[h,v,A]);var ie={display:"none"};return e("div",{className:"canvas-container",children:[t("canvas",{width:v,height:v,ref:J,style:ie}),t("canvas",{width:v,height:v,ref:K,style:ie}),t("canvas",{width:v,height:v,ref:Q,style:ie}),t("canvas",{width:v,height:v,ref:U,style:{cursor:H?"pointer":"default",width:v,height:v},onClick:function(){H&&function(){if(!(_<$)&&Q.current){var e=Q.current,t=e.getContext("2d");t&&(o(e,t),ae())}}()}}),t("audio",{src:undefined,ref:V})]})};s.displayName="WheelOfNames";export{s as default};
//# sourceMappingURL=index.js.map
